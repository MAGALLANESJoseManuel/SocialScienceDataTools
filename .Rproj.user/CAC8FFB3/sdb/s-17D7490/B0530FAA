{
    "contents" : "R TUTORIAL (IV)\n========================================================\n```{r echo=FALSE, set-options }\noptions(width = 320)\n```\nI have not used R for the creation of the network form the bottom-up, but we may use it for plotting and exploration (as Python) and more importantly, for model building and model testing.  \nLet's take a quick look at igraph. \n```{r}\nlibrary (igraph)\n```\n\nWe first need to create the network using the two file we created in Python:\n```{r fig.height=8,fig.width=15}\nel<-read.csv(\"WarsForR.csv\",header=T) #list of edges\nat<-read.csv(\"WarsForR_attr.csv\", header=T, as.is=T) #node attributes\nwarsGraphIgraph2=graph.data.frame(el,directed=FALSE,vertices=at)\nx=V(warsGraphIgraph2)$longitude\ny=V(warsGraphIgraph2)$latitude\nl2=cbind(x,y)\nplot.igraph(warsGraphIgraph2,layout=l2,edge.width=E(warsGraphIgraph2)$duration) #width of edge based on duration!\n```\nOnce we have the network in igraph we can continue using all its tools. Particularly, I recommend reviewing the documentation found at [igraph wiki](http://igraph.sourceforge.net/igraphbook/.\n\nHowever, R will become extremely important to do network modelling, particularly **ERGM** or **TERGM** models using the **statnet**. \n\n```{r message=FALSE}\nlibrary(statnet)\n```\n\nThe documentation of statnet is available in  its [website](http://statnet.org/). However, here we will give you the first and most important step!... read a network:\n```{r}\nel<-read.csv(\"WarsForR.csv\",header=T) #list of edges\nat<-read.csv(\"WarsForR_attr.csv\", header=T, as.is=T) #node attributes\n```\nAs we know, the attributes of the nodes consists of only its coordinates. But to vuild a model it is better that we have other kind of attributes, so let's get back our terrorism score, and merge it with the attribute data:\n```{r}\nRegionCode=read.csv(\"dataCountries.csv\")[,c(1,3)]\nnames(RegionCode)\nRegionCode$Region=as.numeric(RegionCode$Region)\nstr(RegionCode$Region)\nat=merge(at,RegionCode,by.x=\"country\",by.y=\"Country\",all.x=T)\n```\n\nFor sure there will be some some countries without this score (i.e. Soviet Union), but let's keep it simple now. Anyway, before using this merge, let's check what we have and get rid of what we do not need:\n```{r}\nnames(at) #variables after the merge\n```\n\nNow we can create our network in statnet:\n```{r}\nnw<-network(el, #edgelist\n            matrix.typ=\"edgelist\",          #format of 'el'\n            vertex.attr=at,                 #where the node attributes are\n            vertex.attrnames=colnames(at),  #names of node attributes\n            ignore.eval=FALSE,\n            names.eval=c(\"fatalities\",\"duration\",\"name\"),#names of edge attributes\n            directed=F, hyper=F, loops=F, multiple=F, bipartite=F)\n```\n\nAnd can see it our statnet network here (two versions):\n```{r}\ngplot(nw)\ngplot(nw,displaylabels=TRUE,usearrows = F)\nlnw=cbind(nw %v% \"longitude\",nw %v% \"latitude\")\n```\n...and of course:\n```{r fig.height=15,fig.width=18}\ngplot(nw,displaylabels=TRUE,coord=lnw,usearrows = F,edge.lwd=nw %e% \"duration\"/2)\n```\n\nFinally, we can show you how you can model a network in statnet:\n```{r}\nwhyWars<-ergm(nw~edges+nodematch(\"Region\"))\n```\nThis model wants to know, for instance, how the terrorism index increases the probability of a link formation. We can see the result below:\n```{r}\nsummary(whyWars)\n```\n```{r}\nsimWhyWars <- simulate(whyWars)\nplot(simWhyWars)\n```\nThere are many more steps involved in network modelling, and a particularly helpful tutorial on ergm can also be found [here](http://statnet.csde.washington.edu/NME2013/day2/ergm%20tutorial.html).\n",
    "created" : 1396248663003.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1809065932",
    "id" : "B0530FAA",
    "lastKnownWriteTime" : 1396248755,
    "path" : "~/Documents/GITHUBrepositories/Tutorials/TemplatesR/RTutor4.Rmd",
    "project_path" : "TemplatesR/RTutor4.Rmd",
    "properties" : {
    },
    "source_on_save" : false,
    "type" : "r_markdown"
}